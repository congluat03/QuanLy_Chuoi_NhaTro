{% extends 'admin/admin_layout.html' %}
{% load static %}

{% block content_body %}

<div class="w-full px-4 sm:px-8">
  <div class="bg-white shadow-xl rounded-2xl p-4 sm:p-6 space-y-6">

    <!-- Ti√™u ƒë·ªÅ -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-6">
      <div class="flex items-start">
        <div class="bg-indigo-100 text-indigo-600 p-2 rounded-full mt-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5s-3 1.343-3 3 1.343 3 3 3z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 22s8-4.5 8-11c0-4.418-3.582-8-8-8S4 6.582 4 11c0 6.5 8 11 8 11z" />
          </svg>
        </div>
        <div class="ml-3">
          <h1 class="text-2xl sm:text-3xl font-bold text-slate-800 tracking-tight">
            Danh s√°ch khu v·ª±c qu·∫£n l√Ω
          </h1>
          <p class="text-sm text-slate-500 mt-1">
            Ch·ªçn khu v·ª±c ƒë·ªÉ xem danh s√°ch ph√≤ng tr·ªç t∆∞∆°ng ·ª©ng.
          </p>
        </div>
      </div>
    </div>
    <!-- Tabs khu v·ª±c -->
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <ul id="khuvuc-tabs" class="flex flex-wrap gap-3 sm:gap-4">
          {% if not khu_vucs %}
          <li>
              <span class="text-slate-400 italic">‚ö†Ô∏è Ch∆∞a c√≥ khu v·ª±c n√†o ƒë∆∞·ª£c t·∫°o.</span>
          </li>
          {% else %}
            <input type="hidden" id="maKhuVucDauTien" value="{{ khu_vucs.0.MA_KHU_VUC }}">
            {% for khu_vuc in khu_vucs %}
              <li>
                <a href="/admin/phongtro/?ma_khu_vuc={{ khu_vuc.MA_KHU_VUC }}&page_number=1"
                  data-makhuvuc="{{ khu_vuc.MA_KHU_VUC }}"
                  class="khuvuc-tab inline-flex items-center gap-2 px-4 py-2 text-sm sm:text-base font-semibold rounded-xl transition-all duration-200 border
                  {% if request.GET.ma_khu_vuc|stringformat:"s" == khu_vuc.MA_KHU_VUC|stringformat:"s" or not request.GET.ma_khu_vuc and forloop.first %}
                      bg-indigo-600 text-white border-indigo-600 shadow ring-2 ring-indigo-300
                  {% else %}
                      bg-white text-slate-700 border-slate-300 hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-400
                  {% endif %}">
                  {{ khu_vuc.TEN_KHU_VUC }}
                </a>
              </li>
            {% endfor %}

          {% endif %}
      </ul>
    </div>

    <!-- Danh s√°ch ph√≤ng tr·ªç -->
    <div id="phong-tro-content" class="border border-slate-200 rounded-xl bg-slate-50 text-center">
      {% if phong_tros %}
        {% block content_phongtro %} {% endblock %}
      {% else %}
        <p class="text-slate-400 italic">
          üîÑ Danh s√°ch ph√≤ng tr·ªç s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y khi b·∫°n ch·ªçn khu v·ª±c.
        </p>
      {% endif %}
    </div>
  </div>
</div>

<!-- Modal Ph√≤ng Tr·ªç -->
<div id="phongTroModal" tabindex="-1" role="dialog" aria-modal="true"
        class="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 hidden transition-opacity duration-300 ease-in-out"
        onclick="if(event.target === this) togglePhongTroModal()">
    <div id = "modalContainerPT" class="bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[95vh] overflow-y-auto transition-all duration-200">
        <!-- Modal Header -->
       <div class="sticky top-0 z-10 flex items-center justify-center relative px-4 py-2 bg-blue-600 rounded-t-xl">

            <h4 id="phongTroModalLabel" class="text-white text-xl font-semibold text-center flex-grow">
                <!-- Ti√™u ƒë·ªÅ modal -->
            </h4>
            <button type="button" aria-label="ƒê√≥ng"
                    class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-2xl font-bold hover:text-blue-300 focus:outline-none"
                    onclick="togglePhongTroModal()">
                √ó
            </button>
        </div>

        <!-- Modal Body -->
        <div id="modalContentPhongTro" class="px-6 py-6 sm:px-8 sm:py-8">
            <!-- N·ªôi dung ƒë·ªông s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
        </div>
    </div>
</div>


    <!-- JavaScript Includes -->
    <script src="{% static 'js/admin/phongtro/phongtro.js' %}"></script>
{% endblock %}